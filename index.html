<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë°ë¸”ìŠ¤ í”Œëœ ê¸°ì‚¬ì˜ ì—¬í–‰ ê²Œì„</title>
  <!-- PWA / ì•„ì´ì½˜ -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon.png" />
  <meta name="theme-color" content="#ffb703" />

  <!-- OpenÂ Graph / SNS -->
  <meta property="og:title" content="ë°ë¸”ìŠ¤ í”Œëœ ê¸°ì‚¬ì˜ ì—¬í–‰ ê²Œì„ â€“ Knight Tour PWA" />
  <meta property="og:description" content="ë¸Œë¼ìš°ì €ì—ì„œ ì¦ê¸°ëŠ” ê¸°ì‚¬ì˜ ì—¬í–‰ í¼ì¦ â€“ ì˜¤í”„ë¼ì¸ì—ì„œë„ í”Œë ˆì´ ê°€ëŠ¥!" />
  <meta property="og:image" content="open_graph.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://kimsol1134.github.io/Knight_tour/" />
  <!-- og:url ì€ GitHub Pages ë°°í¬ URL ë¡œ ìë™ ì¸ì‹ë˜ë¯€ë¡œ ìƒëµí•˜ê±°ë‚˜ ë„ë©”ì¸ í™•ì • ë’¤ ì¶”ê°€ -->
  <meta name="twitter:card" content="summary_large_image" />

  <style>
    /* (ê¸°ì¡´ style ë™ì¼) */
    *{box-sizing:border-box}
    body{font-family:"Pretendard",Arial,sans-serif;background:#f7f7f7;margin:0;padding:2rem 1rem;text-align:center}
    h1{margin:0 0 .3rem;font-size:2rem;line-height:1.2}
    h1 small{display:block;font-size:.9rem;margin-top:.2rem;color:#555}
    #controls{display:flex;flex-wrap:wrap;justify-content:center;gap:.5rem;margin-bottom:1rem}
    select,button{padding:.5rem .9rem;font-size:1rem;border:1px solid #bbb;border-radius:6px;cursor:pointer}
    button:disabled{cursor:not-allowed;opacity:.6}
    #board{display:grid;gap:2px;justify-content:center;margin:0 auto;max-width:90vw}
    .cell{width:90px;height:90px;background:#fff;border:1px solid #999;display:flex;align-items:center;justify-content:center;font-size:1.4rem;user-select:none}
    .cell.valid{background:#2d6a4f;color:#fff}
    .cell.hint{background:#e63946;color:#fff}
    .cell.visited{background:#a0c4ff}
    #status{margin-top:1rem;font-weight:600}
    .guide-btn{display:inline-block;margin-top:.7rem;padding:.6rem 1.3rem;background:#ffb703;color:#fff!important;text-decoration:none;border-radius:8px;font-weight:600;transition:filter .15s}
    .guide-btn:hover{filter:brightness(.9)}
  </style>
</head>
<body>
  <h1>ë°ë¸”ìŠ¤ í”Œëœ ê¸°ì‚¬ì˜ ì—¬í–‰ ê²Œì„<small>â€“ ë‚˜ì´íŠ¸ íˆ¬ì–´ í¼ì¦ â€“</small></h1>

  <div id="controls">
    <label>
      ì²´ìŠ¤íŒ í¬ê¸° :
      <select id="sizeSelect">
        <option value="5">5 Ã— 5</option>
        <option value="6">6 Ã— 6</option>
        <option value="7">7 Ã— 7</option>
        <option value="8">8 Ã— 8</option>
      </select>
    </label>
    <button id="startBtn">ê²Œì„ ì‹œì‘</button>
    <button id="undoBtn" disabled>ë’¤ë¡œ ê°€ê¸°</button>
    <button id="hintBtn" disabled>íŒíŠ¸ ë³´ê¸°</button>
    <button id="toggleBtn">ì´ë™ ì¹¸ í‘œì‹œ OFF</button>
  </div>

  <div id="board"></div>
  <div id="status"></div>
  <a href="https://blog.naver.com/kimsol1015/223862326616" target="_blank" rel="noopener noreferrer" class="guide-btn">ê³µëµ ë³´ëŸ¬ ê°€ê¸°</a>

<script>
// (ê¸°ì¡´ JS + PWA ë“±ë¡) ------------------------------------------------
const boardEl=document.getElementById('board');
const sizeSelectEl=document.getElementById('sizeSelect');
const startBtn=document.getElementById('startBtn');
const undoBtn=document.getElementById('undoBtn');
const hintBtn=document.getElementById('hintBtn');
const toggleBtn=document.getElementById('toggleBtn');
const statusEl=document.getElementById('status');
const DIRS=[{dx:1,dy:2},{dx:2,dy:1},{dx:2,dy:-1},{dx:1,dy:-2},{dx:-1,dy:-2},{dx:-2,dy:-1},{dx:-2,dy:1},{dx:-1,dy:2}];
let N,visited,stack,cur,showMoves=true,lockedPath=null;
function initBoard(size){N=size;visited=Array.from({length:N},()=>Array(N).fill(false));stack=[{x:0,y:0}];cur={x:0,y:0};visited[0][0]=true;lockedPath=null;boardEl.style.gridTemplateColumns=`repeat(${N},90px)`;render();highlight();updateStatus();undoBtn.disabled=false;hintBtn.disabled=false;}
function render(){boardEl.innerHTML='';for(let y=0;y<N;y++){for(let x=0;x<N;x++){const d=document.createElement('div');d.className='cell';d.dataset.x=x;d.dataset.y=y;if(visited[y][x]){d.classList.add('visited');const idx=stack.findIndex(p=>p.x===x&&p.y===y);d.textContent=idx>=0?idx+1:'';}boardEl.appendChild(d);}}}
function valid(x,y){return x>=0&&y>=0&&x<N&&y<N&&!visited[y][x];}
function highlight(){document.querySelectorAll('.cell').forEach(c=>c.classList.remove('valid','hint'));if(!showMoves)return;DIRS.forEach(({dx,dy})=>{const nx=cur.x+dx,ny=cur.y+dy;if(valid(nx,ny)){const c=document.querySelector(`.cell[data-x="${nx}"][data-y="${ny}"]`);if(c)c.classList.add('valid');}});}
function move(x,y){cur={x,y};visited[y][x]=true;stack.push({x,y});render();highlight();updateStatus();}
function undo(){if(stack.length<=1)return;const last=stack.pop();visited[last.y][last.x]=false;cur=stack[stack.length-1];lockedPath=null;render();highlight();updateStatus();}
function updateStatus(){const total=N*N,done=stack.length;statusEl.textContent=`ì´ë™ íšŸìˆ˜: ${done} / ${total}`;if(done===total){alert('ì„±ê³µí–ˆìŠµë‹ˆë‹¤! ğŸ‰');return;}if(!DIRS.some(({dx,dy})=>valid(cur.x+dx,cur.y+dy))){alert('ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „!');lockedPath=null;}}
function onwardCnt(x,y,v){return DIRS.filter(({dx,dy})=>{const nx=x+dx,ny=y+dy;return nx>=0&&ny>=0&&nx<N&&ny<N&&!v[ny][nx];}).length;}
function buildPath(){const v=visited.map(r=>r.slice());const p=stack.slice();function dfs(x,y,c){if(c===N*N)return true;const m=DIRS.map(({dx,dy})=>({x:x+dx,y:y+dy})).filter(({x,y})=>x>=0&&y>=0&&x<N&&y<N&&!v[y][x]).sort((a,b)=>onwardCnt(a.x,a.y,v)-onwardCnt(b.x,b.y,v));for(const t of m){v[t.y][t.x]=true;p.push(t);if(dfs(t.x,t.y,c+1))return true;p.pop();v[t.y][t.x]=false;}return false;}return dfs(cur.x,cur.y,stack.length)?p:null;}
function hint(){if(!lockedPath)lockedPath=buildPath();if(lockedPath){const n=lockedPath[stack.length];if(n){const c=document.querySelector(`.cell[data-x="${n.x}"][data-y="${n.y}"]`);if(c)c.classList.add('hint');}else alert('ë” ì´ìƒ íŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤!');}else alert('ì„±ê³µ ê²½ë¡œê°€ ì—†ìŠµë‹ˆë‹¤.');}
function toggleShow(){showMoves=!showMoves;toggleBtn.textContent=showMoves?'ì´ë™ ì¹¸ í‘œì‹œ OFF':'ì´ë™ ì¹¸ í‘œì‹œ ON';highlight();}
boardEl.addEventListener('click',e=>{const cell=e.target.closest('.cell');if(!cell||!valid(+cell.dataset.x,+cell.dataset.y))return;move(+cell.dataset.x,+cell.dataset.y);});
startBtn.addEventListener('click',()=>initBoard(+sizeSelectEl.value));undoBtn.addEventListener('click',undo);hintBtn.addEventListener('click',hint);toggleBtn.addEventListener('click',toggleShow);
initBoard(5);
// ---- PWA ServiceWorker ë“±ë¡ ----
if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register('sw.js').catch(console.error));}
</script>
</body>
</html>
